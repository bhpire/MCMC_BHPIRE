<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: twister.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('twister_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">twister.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The Mersenne Twister random number generator.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
</div>
<p><a href="twister_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0240ac851181b84ac374872dc5434ee4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0240ac851181b84ac374872dc5434ee4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>N</b>&#160;&#160;&#160;(624)</td></tr>
<tr class="separator:a0240ac851181b84ac374872dc5434ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52037c938e3c1b126c6277da5ca689d0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a52037c938e3c1b126c6277da5ca689d0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>M</b>&#160;&#160;&#160;(397)</td></tr>
<tr class="separator:a52037c938e3c1b126c6277da5ca689d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d832ae23af4f215e801e37e4f94254"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a97d832ae23af4f215e801e37e4f94254"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>K</b>&#160;&#160;&#160;(0x9908B0DFU)</td></tr>
<tr class="separator:a97d832ae23af4f215e801e37e4f94254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fef977eac943a5f8b538ead34ceac7c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9fef977eac943a5f8b538ead34ceac7c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>hiBit</b>(u)          &#160;&#160;&#160;((u) &amp; 0x80000000U)</td></tr>
<tr class="separator:a9fef977eac943a5f8b538ead34ceac7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68909716d0a95ca4551e9738ca82ddda"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a68909716d0a95ca4551e9738ca82ddda"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>loBit</b>(u)          &#160;&#160;&#160;((u) &amp; 0x00000001U)</td></tr>
<tr class="separator:a68909716d0a95ca4551e9738ca82ddda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae76bb72a8018058a8d070e83028e71d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aae76bb72a8018058a8d070e83028e71d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>loBits</b>(u)        &#160;&#160;&#160;((u) &amp; 0x7FFFFFFFU)</td></tr>
<tr class="separator:aae76bb72a8018058a8d070e83028e71d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca02d83d9f95d1d37b56e20f9c30bd0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2ca02d83d9f95d1d37b56e20f9c30bd0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>mixBits</b>(u,  v)&#160;&#160;&#160;(hiBit(u)|loBits(v))</td></tr>
<tr class="separator:a2ca02d83d9f95d1d37b56e20f9c30bd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a1134b580f8da4de94ca6b1de4d37975e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1134b580f8da4de94ca6b1de4d37975e"></a>
typedef unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>uint32</b></td></tr>
<tr class="separator:a1134b580f8da4de94ca6b1de4d37975e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab5f4fe5f3a3acd5d6ff97ab53f3bf923"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twister_8c.html#ab5f4fe5f3a3acd5d6ff97ab53f3bf923">seedMT</a> (uint32 seed)</td></tr>
<tr class="memdesc:ab5f4fe5f3a3acd5d6ff97ab53f3bf923"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seeding of the random generator.  <a href="#ab5f4fe5f3a3acd5d6ff97ab53f3bf923">More...</a><br /></td></tr>
<tr class="separator:ab5f4fe5f3a3acd5d6ff97ab53f3bf923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad05871d7fdd009889f599f7d41d5c02d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad05871d7fdd009889f599f7d41d5c02d"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><b>reloadMT</b> (void)</td></tr>
<tr class="separator:ad05871d7fdd009889f599f7d41d5c02d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab258ae2cb6be8b494bd2028e11fdf0b1"><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twister_8c.html#ab258ae2cb6be8b494bd2028e11fdf0b1">randomMT</a> (void)</td></tr>
<tr class="memdesc:ab258ae2cb6be8b494bd2028e11fdf0b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Random number generator.  <a href="#ab258ae2cb6be8b494bd2028e11fdf0b1">More...</a><br /></td></tr>
<tr class="separator:ab258ae2cb6be8b494bd2028e11fdf0b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The Mersenne Twister random number generator. </p>
<p><a href="http://www.math.keio.ac.jp/~matumoto/ver980409.html">http://www.math.keio.ac.jp/~matumoto/ver980409.html</a></p>
<p>This is the ``Mersenne Twister'' random number generator MT19937, which generates pseudorandom integers uniformly distributed in 0..(2^32 - 1) starting from any odd seed in 0..(2^32 - 1). This version is a recode by Shawn Cokus (<a href="#" onclick="location.href='mai'+'lto:'+'Cok'+'us'+'@ma'+'th'+'.wa'+'sh'+'ing'+'to'+'n.e'+'du'; return false;">Cokus<span style="display: none;">.nosp@m.</span>@mat<span style="display: none;">.nosp@m.</span>h.was<span style="display: none;">.nosp@m.</span>hing<span style="display: none;">.nosp@m.</span>ton.e<span style="display: none;">.nosp@m.</span>du</a>) on March 8, 1998 of a version by Takuji Nishimura (who had suggestions from Topher Cooper and Marc Rieffel in July-August 1997).</p>
<p>Effectiveness of the recoding (on Goedel2.math.washington.edu, a DEC Alpha running OSF/1) using GCC -O3 as a compiler: before recoding: 51.6 sec. to generate 300 million random numbers; after recoding: 24.0 sec. for the same (i.e., 46.5% of original time), so speed is now about 12.5 million random number generations per second on this machine.</p>
<p>According to the URL <a href="http:www.math.keio.ac.jp/~matumoto/emt.html">http:www.math.keio.ac.jp/~matumoto/emt.html</a> (and paraphrasing a bit in places), the Mersenne Twister is ``designed with consideration of the flaws of various existing generators,'' has a period of 2^19937 - 1, gives a sequence that is 623-dimensionally equidistributed, and ``has passed many stringent tests, including the die-hard test of G. Marsaglia and the load test of P. Hellekalek and S. Wegenkittl.'' It is efficient in memory usage (typically using 2506 to 5012 bytes of static data, depending on data type sizes, and the code is quite short as well). It generates random numbers in batches of 624 at a time, so the caching and pipelining of modern systems is exploited. It is also divide- and mod-free.</p>
<p>This library is free software; you can redistribute it and/or modify it under the terms of the GNU Library General Public License as published by the Free Software Foundation (either version 2 of the License or, at your option, any later version). This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY, without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Library General Public License for more details. You should have received a copy of the GNU Library General Public License along with this library; if not, write to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.</p>
<p>The code as Shawn received it included the following notice:</p>
<p>Copyright (C) 1997 Makoto Matsumoto and Takuji Nishimura. When you use this, send an e-mail to <a href="#" onclick="location.href='mai'+'lto:'+'mat'+'um'+'oto'+'@m'+'ath'+'.k'+'eio'+'.a'+'c.j'+'p'; return false;">matum<span style="display: none;">.nosp@m.</span>oto@<span style="display: none;">.nosp@m.</span>math.<span style="display: none;">.nosp@m.</span>keio<span style="display: none;">.nosp@m.</span>.ac.j<span style="display: none;">.nosp@m.</span>p</a> with an appropriate reference to your work.</p>
<p>It would be nice to CC: <a href="#" onclick="location.href='mai'+'lto:'+'Cok'+'us'+'@ma'+'th'+'.wa'+'sh'+'ing'+'to'+'n.e'+'du'; return false;">Cokus<span style="display: none;">.nosp@m.</span>@mat<span style="display: none;">.nosp@m.</span>h.was<span style="display: none;">.nosp@m.</span>hing<span style="display: none;">.nosp@m.</span>ton.e<span style="display: none;">.nosp@m.</span>du</a> when you write.</p>
<dl class="section author"><dt>Author</dt><dd>Shawn Cokus (<a href="#" onclick="location.href='mai'+'lto:'+'Cok'+'us'+'@ma'+'th'+'.wa'+'sh'+'ing'+'to'+'n.e'+'du'; return false;">Cokus<span style="display: none;">.nosp@m.</span>@mat<span style="display: none;">.nosp@m.</span>h.was<span style="display: none;">.nosp@m.</span>hing<span style="display: none;">.nosp@m.</span>ton.e<span style="display: none;">.nosp@m.</span>du</a>)</dd></dl>
<dl class="section date"><dt>Date</dt><dd>March 8, 1998</dd></dl>
<p>No known bugs</p>
<p>\ warning No known warnings </p>

<p>Definition in file <a class="el" href="twister_8c_source.html">twister.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab258ae2cb6be8b494bd2028e11fdf0b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 randomMT </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Random number generator. </p>
<p>Random number generator </p>

<p>Definition at line <a class="el" href="twister_8c_source.html#l00180">180</a> of file <a class="el" href="twister_8c_source.html">twister.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab5f4fe5f3a3acd5d6ff97ab53f3bf923"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void seedMT </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seeding of the random generator. </p>
<p>We initialize state[0..(N-1)] via the generator</p>
<p>x_new = (69069 * x_old) mod 2^32</p>
<p>from Line 15 of Table 1, p. 106, Sec. 3.3.4 of Knuth's <em>The Art of Computer Programming</em>, Volume 2, 3rd ed.</p>
<p>Notes (SJC): I do not know what the initial state requirements of the Mersenne Twister are, but it seems this seeding generator could be better. It achieves the maximum period for its modulus (2^30) iff x_initial is odd (p. 20-21, Sec. 3.2.1.2, Knuth); if x_initial can be even, you have sequences like 0, 0, 0, ...; 2^31, 2^31, 2^31, ...; 2^30, 2^30, 2^30, ...; 2^29, 2^29 + 2^31, 2^29, 2^29 + 2^31, ..., etc. so I force seed to be odd below.</p>
<p>Even if x_initial is odd, if x_initial is 1 mod 4 then</p>
<p>the lowest bit of x is always 1, the next-to-lowest bit of x is always 0, the 2nd-from-lowest bit of x alternates ... 0 1 0 1 0 1 0 1 ... , the 3rd-from-lowest bit of x 4-cycles ... 0 1 1 0 0 1 1 0 ... , the 4th-from-lowest bit of x has the 8-cycle ... 0 0 0 1 1 1 1 0 ... , ...</p>
<p>and if x_initial is 3 mod 4 then</p>
<p>the lowest bit of x is always 1, the next-to-lowest bit of x is always 1, the 2nd-from-lowest bit of x alternates ... 0 1 0 1 0 1 0 1 ... , the 3rd-from-lowest bit of x 4-cycles ... 0 0 1 1 0 0 1 1 ... , the 4th-from-lowest bit of x has the 8-cycle ... 0 0 1 1 1 1 0 0 ... , ...</p>
<p>The generator's potency (min. s&gt;=0 with (69069-1)^s = 0 mod 2^32) is 16, which seems to be alright by p. 25, Sec. 3.2.1.3 of Knuth. It also does well in the dimension 2..5 spectral tests, but it could be better in dimension 6 (Line 15, Table 1, p. 106, Sec. 3.3.4, Knuth).</p>
<p>Note that the random number user does not see the values generated here directly since reloadMT() will always munge them first, so maybe none of all of this matters. In fact, the seed values made here could even be extra-special desirable if the Mersenne Twister theory says so&ndash; that's why the only change I made is to restrict to odd seeds. </p>

<p>Definition at line <a class="el" href="twister_8c_source.html#l00137">137</a> of file <a class="el" href="twister_8c_source.html">twister.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="twister_8c.html">twister.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
